{"ast":null,"code":"import axios from \"axios\";\nimport router from '../router/index';\nimport { ElMessage } from 'element-plus';\naxios.defaults.baseURL = \"http://localhost:8000/web\";\nconst request = axios.create({\n  timeout: 5000,\n  headers: {\n    'Content-Type': 'application/json;charset=UTF-8'\n  }\n});\nrequest.interceptors.request.use(config => {\n  config.headers['token'] = localStorage.getItem('token');\n  return config;\n});\nrequest.interceptors.response.use(response => {\n  if (response.data.code === 200) {\n    console.log(response);\n    return response;\n  } else {\n    ElMessage.error(response.data.message);\n    console.log(response);\n    return Promise.reject(response);\n  }\n}, error => {\n  console.log(error);\n  router.push('/404');\n  return Promise.reject(error);\n});\nexport default request;","map":{"version":3,"names":["axios","router","ElMessage","defaults","baseURL","request","create","timeout","headers","interceptors","use","config","localStorage","getItem","response","data","code","console","log","error","message","Promise","reject","push"],"sources":["/Users/work/server/imall/web/src/axios/index.js"],"sourcesContent":["import axios from \"axios\";\nimport router from '../router/index';\nimport { ElMessage } from 'element-plus';\n\naxios.defaults.baseURL = \"http://localhost:8000/web\";\n\nconst request = axios.create({\n    timeout: 5000,\n    headers: {\n        'Content-Type': 'application/json;charset=UTF-8'\n    }\n});\n\nrequest.interceptors.request.use(config => {\n    config.headers['token'] = localStorage.getItem('token')\n    return config\n})\n\nrequest.interceptors.response.use(response => {\n    if (response.data.code === 200){\n        console.log(response)\n        return response;\n    } else {\n        ElMessage.error(response.data.message)\n        console.log(response)\n        return Promise.reject(response)\n    }\n},error => {\n    console.log(error)\n    router.push('/404');\n    return Promise.reject(error)\n})\n\nexport default request;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,iBAAiB;AACpC,SAASC,SAAS,QAAQ,cAAc;AAExCF,KAAK,CAACG,QAAQ,CAACC,OAAO,GAAG,2BAA2B;AAEpD,MAAMC,OAAO,GAAGL,KAAK,CAACM,MAAM,CAAC;EACzBC,OAAO,EAAE,IAAI;EACbC,OAAO,EAAE;IACL,cAAc,EAAE;EACpB;AACJ,CAAC,CAAC;AAEFH,OAAO,CAACI,YAAY,CAACJ,OAAO,CAACK,GAAG,CAACC,MAAM,IAAI;EACvCA,MAAM,CAACH,OAAO,CAAC,OAAO,CAAC,GAAGI,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EACvD,OAAOF,MAAM;AACjB,CAAC,CAAC;AAEFN,OAAO,CAACI,YAAY,CAACK,QAAQ,CAACJ,GAAG,CAACI,QAAQ,IAAI;EAC1C,IAAIA,QAAQ,CAACC,IAAI,CAACC,IAAI,KAAK,GAAG,EAAC;IAC3BC,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAAC;IACrB,OAAOA,QAAQ;EACnB,CAAC,MAAM;IACHZ,SAAS,CAACiB,KAAK,CAACL,QAAQ,CAACC,IAAI,CAACK,OAAO,CAAC;IACtCH,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAAC;IACrB,OAAOO,OAAO,CAACC,MAAM,CAACR,QAAQ,CAAC;EACnC;AACJ,CAAC,EAACK,KAAK,IAAI;EACPF,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC;EAClBlB,MAAM,CAACsB,IAAI,CAAC,MAAM,CAAC;EACnB,OAAOF,OAAO,CAACC,MAAM,CAACH,KAAK,CAAC;AAChC,CAAC,CAAC;AAEF,eAAed,OAAO"},"metadata":{},"sourceType":"module"}