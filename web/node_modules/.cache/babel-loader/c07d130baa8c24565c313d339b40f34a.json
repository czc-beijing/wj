{"ast":null,"code":"import container from \"../components/container\";\nimport { Delete, Edit, Plus, Search, WarningFilled } from \"@element-plus/icons-vue\";\nimport { ElMessage } from \"element-plus\";\nexport default {\n  name: \"Category\",\n  components: {\n    container\n  },\n  setup() {\n    return {\n      Search,\n      Plus,\n      Edit,\n      Delete,\n      WarningFilled\n    };\n  },\n  data() {\n    return {\n      categoryLv1List: [],\n      categoryLv2List: [],\n      category: {\n        id: '',\n        name: '',\n        parentId: '',\n        level: '',\n        sort: ''\n      },\n      query: {\n        name: ''\n      },\n      dialogTitle: '',\n      operateType: '',\n      categoryDialogVisible: false,\n      checkLv2CategoryDialogVisible: false,\n      // 分页\n      total: 0,\n      pageNum: 1,\n      pageSize: 10,\n      // 空状态\n      showEmpty: false\n    };\n  },\n  mounted() {\n    this.getCategoryList(1);\n  },\n  methods: {\n    // 分页，处理函数\n    handleCurrentChangePrev(val) {\n      this.pageNum = val;\n      console.log(`上一页: ${val}`);\n    },\n    handleCurrentChange(val) {\n      this.pageNum = val;\n      this.getCategoryList();\n      console.log(`当前页: ${val}`);\n    },\n    handleCurrentChangeNext(val) {\n      this.pageNum = val;\n      console.log(`下一页: ${val}`);\n    },\n    // 添加一级类目\n    addLv1Category() {\n      this.operateType = 'add';\n      this.dialogTitle = '添加一级类目';\n      this.category.level = 1;\n      this.category.parentId = 1;\n      this.categoryDialogVisible = true;\n    },\n    // 编辑一级类目\n    editLv1Category(row) {\n      this.operateType = 'edit';\n      this.dialogTitle = '编辑一级类目';\n      this.category.id = row.id;\n      this.category.name = row.name;\n      this.category.sort = row.sort;\n      this.categoryDialogVisible = true;\n    },\n    // 添加二级类目\n    addLv2Category(row) {\n      this.operateType = 'add';\n      this.dialogTitle = '添加二级类目';\n      this.category.level = 2;\n      this.category.parentId = row.id;\n      this.categoryDialogVisible = true;\n    },\n    // 编辑二级类目\n    editLv2Category(row) {\n      this.operateType = 'edit';\n      this.dialogTitle = '编辑二级类目';\n      this.category.id = row.id;\n      this.category.name = row.name;\n      this.category.sort = row.sort;\n      this.categoryDialogVisible = true;\n    },\n    // 查看二级类目\n    checkLv2Category(row) {\n      this.dialogTitle = '查看二级类目';\n      this.getCategoryList(row.id);\n      this.checkLv2CategoryDialogVisible = true;\n    },\n    // 获取类目列表\n    getCategoryList(parentId) {\n      this.$axios.get('/category/list', {\n        params: {\n          name: this.query.name,\n          parentId: parentId,\n          sid: localStorage.getItem('sid')\n        }\n      }).then(response => {\n        if (parentId === 1) {\n          this.categoryLv1List = response.data.data;\n        } else {\n          this.categoryLv2List = response.data.data;\n        }\n        if (this.categoryLv1List.length === 0) {\n          this.showEmpty = true;\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    // 确定添加、编辑类目\n    confirmCategory() {\n      if (this.operateType === 'add') {\n        this.$axios.post('/category/create', {\n          name: this.category.name,\n          parentId: this.category.parentId,\n          level: this.category.level,\n          sort: this.category.sort,\n          sid: localStorage.getItem('sid')\n        }).then(response => {\n          if (response.data.code === 200) {\n            ElMessage({\n              message: response.data.message,\n              type: 'success'\n            });\n          }\n          this.getCategoryList(1);\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n      if (this.operateType === 'edit') {\n        this.$axios.put('/category/update', {\n          id: this.category.id,\n          name: this.category.name,\n          sort: this.category.sort\n        }).then(response => {\n          if (response.data.code === 200) {\n            ElMessage({\n              message: response.data.message,\n              type: 'success'\n            });\n          }\n          this.getCategoryList(1);\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n      this.categoryDialogVisible = false;\n      this.checkLv2CategoryDialogVisible = false;\n    },\n    deleteCategory(row) {\n      this.$axios.delete('/category/delete', {\n        params: {\n          id: row.id\n        }\n      }).then(response => {\n        if (response.data.code === 200) {\n          ElMessage({\n            message: response.data.message,\n            type: 'success'\n          });\n        }\n        this.getCategoryList(1);\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    cancelCategory() {\n      this.categoryDialogVisible = false;\n      this.emptyCategory();\n      this.dialogTitle = '';\n      this.operateType = '';\n    },\n    // 清空类目\n    emptyCategory() {\n      this.category.id = '';\n      this.category.name = '';\n      this.category.parentId = '';\n      this.category.level = '';\n      this.category.sort = '';\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["container","Delete","Edit","Plus","Search","WarningFilled","ElMessage","name","components","setup","data","categoryLv1List","categoryLv2List","category","id","parentId","level","sort","query","dialogTitle","operateType","categoryDialogVisible","checkLv2CategoryDialogVisible","total","pageNum","pageSize","showEmpty","mounted","getCategoryList","methods","handleCurrentChangePrev","val","console","log","handleCurrentChange","handleCurrentChangeNext","addLv1Category","editLv1Category","row","addLv2Category","editLv2Category","checkLv2Category","$axios","get","params","sid","localStorage","getItem","then","response","length","catch","error","confirmCategory","post","code","message","type","put","deleteCategory","delete","cancelCategory","emptyCategory"],"sourceRoot":"","sources":["/Users/work/server/imall/web/src/view/Category.vue"],"sourcesContent":["<template>\n  <container>\n    <!-- 商品查询 -->\n    <el-form :inline=\"true\" :model=\"query\" ref=\"query\" class=\"goods_query_form\">\n      <el-form-item prop=\"name\">\n        <el-input v-model.number=\"query.name\" placeholder=\"类目名称\"/>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" :icon=\"Search\" @click=\"getCategoryList\">查询</el-button>\n        <el-button type=\"primary\" @click=\"addLv1Category\">添加一级类目</el-button>\n      </el-form-item>\n    </el-form>\n    <!-- 商品一级类目列表 -->\n    <el-table :data=\"categoryLv1List\" height=\"65vh\" style=\"width: 100%\">\n      <el-table-column prop=\"id\" label=\"编号\"/>\n      <el-table-column prop=\"name\" label=\"名称\"/>\n      <el-table-column prop=\"level\" label=\"级别\"/>\n      <el-table-column prop=\"sort\" label=\"排序\"/>\n      <el-table-column label=\"操作\" min-width=\"130\">\n        <template #default=\"scope\">\n          <el-button size=\"small\" type=\"primary\" :icon=\"Edit\" @click=\"editLv1Category(scope.row)\"/>\n          <el-button size=\"small\" type=\"primary\" :icon=\"Plus\" @click=\"addLv2Category(scope.row)\"/>\n          <el-button size=\"small\" type=\"primary\" @click=\"checkLv2Category(scope.row)\">查看二级类目</el-button>\n          <el-popconfirm title=\"此操作将永久删除该信息, 是否继续?\"\n                         confirmButtonText=\"确认\"\n                         cancelButtonText=\"取消\"\n                         cancelButtonType=\"default\"\n                         :icon=\"WarningFilled\"\n                         @confirm=\"deleteCategory(scope.row)\">\n            <template #reference>\n             <el-button size=\"small\" type=\"danger\" :icon=\"Delete\"/>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n      <template #empty>\n        <div style=\"margin: 50px 0;\">\n          <el-empty v-if=\"showEmpty\" description=\"暂时还没有商品哦\" />\n        </div>\n      </template>\n    </el-table>\n    <div style=\"padding: 10px 0;\">\n      <el-pagination layout=\"total, prev, pager, next\"\n                   :current-page=\"pageNum\"\n                   :page-size=\"pageSize\"\n                   :total=\"total\"\n                   @current-change=\"handleCurrentChange\"\n                   @prev-click=\"handleCurrentChangePrev\"\n                   @next-click=\"handleCurrentChangeNext\" background/>\n    </div>\n    <!-- 添加、编辑商品，通用对话框 -->\n    <el-dialog :title=\"dialogTitle\" v-model=\"categoryDialogVisible\" top=\"30vh\" width=\"35%\" @close=\"cancelCategory\">\n      <el-form :model=\"category\" label-width=\"50px\" style=\"padding: 10px;\">\n        <el-form-item label=\"名称\">\n          <el-input v-model=\"category.name\" type=\"text\" maxlength=\"10\" show-word-limit/>\n        </el-form-item>\n        <el-form-item label=\"排序\">\n          <el-input v-model.number=\"category.sort\" />\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"cancelCategory\">取消</el-button>\n          <el-button type=\"primary\" @click=\"confirmCategory\">确定</el-button>\n        </span>\n      </template>\n    </el-dialog>\n    <!-- 查看二级类目列表，对话框 -->\n    <el-dialog :title=\"dialogTitle\" v-model=\"checkLv2CategoryDialogVisible\" top=\"10vh\" width=\"50%\">\n      <el-table :data=\"categoryLv2List\" height=\"60vh\" style=\"width: 100%\">\n        <el-table-column prop=\"id\" label=\"编号\"/>\n        <el-table-column prop=\"name\" label=\"名称\"/>\n        <el-table-column prop=\"level\" label=\"级别\"/>\n        <el-table-column prop=\"sort\" label=\"排序\"/>\n        <el-table-column label=\"操作\" min-width=\"130\">\n          <template #default=\"scope\">\n            <el-button size=\"small\" type=\"primary\" :icon=\"Edit\" @click=\"editLv2Category(scope.row)\"/>\n            <el-popconfirm title=\"此操作将永久删除该信息, 是否继续?\"\n                         confirmButtonText=\"确认\"\n                         cancelButtonText=\"取消\"\n                         cancelButtonType=\"default\"\n                         :icon=\"WarningFilled\"\n                         @confirm=\"deleteCategory(scope.row)\">\n            <template #reference>\n             <el-button size=\"small\" type=\"danger\" :icon=\"Delete\"/>\n            </template>\n          </el-popconfirm>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-dialog>\n  </container>\n</template>\n\n<script>\nimport container from \"../components/container\";\nimport {Delete, Edit, Plus, Search, WarningFilled} from \"@element-plus/icons-vue\";\nimport {ElMessage} from \"element-plus\";\n\nexport default {\n  name: \"Category\",\n  components: {container},\n  setup() {\n    return {Search, Plus, Edit, Delete, WarningFilled}\n  },\n  data() {\n    return {\n      categoryLv1List: [],\n      categoryLv2List: [],\n      category: {\n        id: '',\n        name: '',\n        parentId: '',\n        level: '',\n        sort: ''\n      },\n      query: {\n        name: ''\n      },\n      dialogTitle: '',\n      operateType: '',\n      categoryDialogVisible: false,\n      checkLv2CategoryDialogVisible: false,\n\n      // 分页\n      total: 0,\n      pageNum: 1,\n      pageSize: 10,\n\n      // 空状态\n      showEmpty: false\n    }\n  },\n  mounted() {\n    this.getCategoryList(1)\n  },\n  methods: {\n\n    // 分页，处理函数\n    handleCurrentChangePrev(val) {\n      this.pageNum = val;\n      console.log(`上一页: ${val}`);\n    },\n    handleCurrentChange(val) {\n      this.pageNum = val;\n      this.getCategoryList();\n      console.log(`当前页: ${val}`);\n    },\n    handleCurrentChangeNext(val) {\n      this.pageNum = val;\n      console.log(`下一页: ${val}`);\n    },\n\n    // 添加一级类目\n    addLv1Category(){\n      this.operateType = 'add'\n      this.dialogTitle = '添加一级类目'\n      this.category.level = 1\n      this.category.parentId = 1\n      this.categoryDialogVisible = true\n    },\n\n    // 编辑一级类目\n    editLv1Category(row){\n      this.operateType = 'edit'\n      this.dialogTitle = '编辑一级类目'\n      this.category.id = row.id\n      this.category.name = row.name\n      this.category.sort = row.sort\n      this.categoryDialogVisible = true\n    },\n\n    // 添加二级类目\n    addLv2Category(row){\n      this.operateType = 'add'\n      this.dialogTitle = '添加二级类目'\n      this.category.level = 2\n      this.category.parentId = row.id\n      this.categoryDialogVisible = true\n    },\n\n    // 编辑二级类目\n    editLv2Category(row){\n      this.operateType = 'edit'\n      this.dialogTitle = '编辑二级类目'\n      this.category.id = row.id\n      this.category.name = row.name\n      this.category.sort = row.sort\n      this.categoryDialogVisible = true\n    },\n\n    // 查看二级类目\n    checkLv2Category(row){\n      this.dialogTitle = '查看二级类目'\n      this.getCategoryList(row.id)\n      this.checkLv2CategoryDialogVisible = true\n    },\n\n    // 获取类目列表\n    getCategoryList(parentId){\n      this.$axios.get('/category/list', {\n        params: {\n          name: this.query.name,\n          parentId: parentId,\n          sid: localStorage.getItem('sid')\n        }\n      }).then((response) => {\n        if (parentId === 1){\n          this.categoryLv1List = response.data.data;\n        } else {\n          this.categoryLv2List = response.data.data;\n        }\n        if (this.categoryLv1List.length === 0) {\n          this.showEmpty = true\n        }\n      }).catch((error) => {\n        console.log(error)\n      })\n    },\n\n    // 确定添加、编辑类目\n    confirmCategory(){\n      if (this.operateType === 'add'){\n        this.$axios.post('/category/create', {\n          name: this.category.name,\n          parentId: this.category.parentId,\n          level: this.category.level,\n          sort: this.category.sort,\n          sid: localStorage.getItem('sid')\n        }).then((response) => {\n          if (response.data.code === 200) {\n            ElMessage({message: response.data.message, type: 'success'})\n          }\n          this.getCategoryList(1)\n        }).catch((error) => {\n          console.log(error)\n        })\n      }\n      if (this.operateType === 'edit'){\n        this.$axios.put('/category/update', {\n          id: this.category.id,\n          name: this.category.name,\n          sort: this.category.sort\n        }).then((response) => {\n          if (response.data.code === 200) {\n            ElMessage({message: response.data.message, type: 'success'})\n          }\n          this.getCategoryList(1)\n        }).catch((error) => {\n          console.log(error)\n        })\n      }\n      this.categoryDialogVisible = false\n      this.checkLv2CategoryDialogVisible = false\n    },\n    deleteCategory(row){\n      this.$axios.delete('/category/delete', {\n          params: {\n            id: row.id\n          }\n        }).then((response) => {\n          if (response.data.code === 200) {\n            ElMessage({message: response.data.message, type: 'success'})\n          }\n          this.getCategoryList(1)\n        }).catch((error) => {\n          console.log(error)\n      })\n    },\n    cancelCategory(){\n      this.categoryDialogVisible = false\n      this.emptyCategory()\n      this.dialogTitle = ''\n      this.operateType = ''\n    },\n\n    // 清空类目\n    emptyCategory(){\n      this.category.id = ''\n      this.category.name = ''\n      this.category.parentId = ''\n      this.category.level = ''\n      this.category.sort = ''\n    }\n  }\n}\n</script>\n\n<style scoped>\n.el-dialog {\n  height: 200px !important;\n  overflow-y: scroll;\n}\n</style>"]},"metadata":{},"sourceType":"module"}