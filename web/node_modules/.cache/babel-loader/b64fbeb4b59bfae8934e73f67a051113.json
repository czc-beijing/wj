{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, vShow as _vShow, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-2f3258bd\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  style: {\n    \"display\": \"flex\",\n    \"align-items\": \"center\"\n  }\n};\nconst _hoisted_2 = {\n  style: {\n    \"margin-left\": \"10px\"\n  }\n};\nconst _hoisted_3 = {\n  style: {\n    \"display\": \"flex\",\n    \"align-items\": \"center\"\n  }\n};\nconst _hoisted_4 = {\n  style: {\n    \"margin-left\": \"10px\"\n  }\n};\nconst _hoisted_5 = {\n  style: {\n    \"margin\": \"50px 0\"\n  }\n};\nconst _hoisted_6 = {\n  style: {\n    \"padding\": \"10px 0\"\n  }\n};\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"goods_image_upload_icon\"\n}, \"+\", -1 /* HOISTED */));\nconst _hoisted_8 = {\n  style: {\n    \"display\": \"flex\",\n    \"justify-content\": \"center\",\n    \"align-items\": \"center\"\n  }\n};\nconst _hoisted_9 = {\n  style: {\n    \"font-size\": \"10px\",\n    \"line-height\": \"15px\"\n  }\n};\nconst _hoisted_10 = {\n  style: {\n    \"display\": \"flex\",\n    \"justify-content\": \"center\",\n    \"align-items\": \"center\"\n  }\n};\nconst _hoisted_11 = {\n  style: {\n    \"font-size\": \"10px\",\n    \"line-height\": \"15px\"\n  }\n};\nconst _hoisted_12 = {\n  style: {\n    \"text-align\": \"right\",\n    \"margin\": \"0\",\n    \"padding-top\": \"10px\"\n  }\n};\nconst _hoisted_13 = {\n  class: \"dialog-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_image = _resolveComponent(\"el-image\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_timer = _resolveComponent(\"timer\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_switch = _resolveComponent(\"el-switch\");\n  const _component_el_popconfirm = _resolveComponent(\"el-popconfirm\");\n  const _component_el_empty = _resolveComponent(\"el-empty\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  const _component_el_upload = _resolveComponent(\"el-upload\");\n  const _component_el_date_picker = _resolveComponent(\"el-date-picker\");\n  const _component_el_popover = _resolveComponent(\"el-popover\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  const _component_container = _resolveComponent(\"container\");\n  return _openBlock(), _createBlock(_component_container, null, {\n    default: _withCtx(() => [_createCommentVNode(\" 活动查询 \"), _createVNode(_component_el_form, {\n      inline: true,\n      model: $data.query,\n      ref: \"query\",\n      class: \"goods_query_form\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        prop: \"id\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.query.id,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.query.id = $event),\n          modelModifiers: {\n            number: true\n          },\n          placeholder: \"活动ID\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        prop: \"status\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $data.query.type,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.query.type = $event),\n          placeholder: \"活动类型\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_option, {\n            label: \"钻石展位\",\n            value: \"1\"\n          }), _createVNode(_component_el_option, {\n            label: \"限时特惠\",\n            value: \"2\"\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        prop: \"status\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $data.query.status,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.query.status = $event),\n          placeholder: \"活动状态\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_option, {\n            label: \"进行中\",\n            value: \"1\"\n          }), _createVNode(_component_el_option, {\n            label: \"已结束\",\n            value: \"2\"\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, null, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          icon: $setup.Search,\n          onClick: $options.getMarketList\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"查询\")]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"icon\", \"onClick\"]), _createVNode(_component_el_button, {\n          type: \"primary\",\n          icon: $setup.Brush,\n          onClick: $options.resetForm\n        }, null, 8 /* PROPS */, [\"icon\", \"onClick\"]), _createVNode(_component_el_button, {\n          type: \"primary\",\n          icon: $setup.Plus,\n          onClick: $options.add\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"活动\")]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"icon\", \"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"]), _createCommentVNode(\" 活动列表 \"), _createVNode(_component_el_table, {\n      data: $data.marketList,\n      height: \"65vh\",\n      style: {\n        \"width\": \"100%\"\n      }\n    }, {\n      empty: _withCtx(() => [_createElementVNode(\"div\", _hoisted_5, [$data.showEmpty ? (_openBlock(), _createBlock(_component_el_empty, {\n        key: 0,\n        description: \"暂时还没有活动哦\"\n      })) : _createCommentVNode(\"v-if\", true)])]),\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        prop: \"bannerImage\",\n        label: \"活动图片\",\n        \"min-width\": \"50\"\n      }, {\n        default: _withCtx(scope => [_createVNode(_component_el_image, {\n          src: scope.row.bannerImage,\n          style: {\n            \"border-radius\": \"5px\"\n          }\n        }, null, 8 /* PROPS */, [\"src\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"name\",\n        label: \"活动名称\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"type\",\n        label: \"活动类型\",\n        \"min-width\": \"50\"\n      }, {\n        default: _withCtx(scope => [scope.row.type === 1 ? (_openBlock(), _createBlock(_component_el_tag, {\n          key: 0,\n          type: \"primary\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"新品推荐\")]),\n          _: 1 /* STABLE */\n        })) : _createCommentVNode(\"v-if\", true), scope.row.type === 2 ? (_openBlock(), _createBlock(_component_el_tag, {\n          key: 1,\n          type: \"primary\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"限时特惠\")]),\n          _: 1 /* STABLE */\n        })) : _createCommentVNode(\"v-if\", true)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"beginTime\",\n        label: \"开始时间\",\n        \"min-width\": \"100\"\n      }, {\n        default: _withCtx(scope => [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_component_timer)]),\n          _: 1 /* STABLE */\n        }), _createElementVNode(\"span\", _hoisted_2, _toDisplayString(scope.row.beginTime), 1 /* TEXT */)])]),\n\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"overTime\",\n        label: \"结束时间\",\n        \"min-width\": \"100\"\n      }, {\n        default: _withCtx(scope => [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_component_timer)]),\n          _: 1 /* STABLE */\n        }), _createElementVNode(\"span\", _hoisted_4, _toDisplayString(scope.row.overTime), 1 /* TEXT */)])]),\n\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"status\",\n        label: \"状态\",\n        \"min-width\": \"50\"\n      }, {\n        default: _withCtx(scope => [_createVNode(_component_el_switch, {\n          modelValue: scope.row.status,\n          \"onUpdate:modelValue\": $event => scope.row.status = $event,\n          \"active-value\": 1,\n          \"inactive-value\": 2,\n          onClick: $event => $options.changeStatus(scope.row)\n        }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\", \"onClick\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        label: \"操作\"\n      }, {\n        default: _withCtx(scope => [_createVNode(_component_el_button, {\n          size: \"small\",\n          onClick: $event => $options.edit(scope.row)\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"编辑\")]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_el_popconfirm, {\n          title: \"此操作将永久删除该信息, 是否继续?\",\n          confirmButtonText: \"确认\",\n          cancelButtonText: \"取消\",\n          cancelButtonType: \"default\",\n          icon: $setup.WarningFilled,\n          onConfirm: $event => $options.deleteMarket(scope.row)\n        }, {\n          reference: _withCtx(() => [_createVNode(_component_el_button, {\n            size: \"small\",\n            type: \"danger\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"删除\")]),\n            _: 1 /* STABLE */\n          })]),\n\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"icon\", \"onConfirm\"])]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\"]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_pagination, {\n      layout: \"total, prev, pager, next\",\n      \"current-page\": $data.pageNum,\n      \"page-size\": $data.pageSize,\n      total: $data.total,\n      onCurrentChange: $options.handleCurrentChange,\n      onPrevClick: $options.handleCurrentChangePrev,\n      onNextClick: $options.handleCurrentChangeNext,\n      background: \"\"\n    }, null, 8 /* PROPS */, [\"current-page\", \"page-size\", \"total\", \"onCurrentChange\", \"onPrevClick\", \"onNextClick\"])]), _createCommentVNode(\" 添加、编辑营销，通用对话框 \"), _createVNode(_component_el_dialog, {\n      title: $data.dialogTitle,\n      modelValue: $data.marketDialogVisible,\n      \"onUpdate:modelValue\": _cache[11] || (_cache[11] = $event => $data.marketDialogVisible = $event),\n      \"lock-scroll\": false,\n      top: \"5vh\",\n      width: \"45%\",\n      onClose: $options.cancel\n    }, {\n      footer: _withCtx(() => [_createElementVNode(\"span\", _hoisted_13, [_createVNode(_component_el_button, {\n        onClick: $options.cancel\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"取消\")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n        onClick: _cache[10] || (_cache[10] = $event => $options.resetForm('ruleForm'))\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"重置\")]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: $options.confirmMarket\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"确定\")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])])]),\n      default: _withCtx(() => [_createVNode(_component_el_form, {\n        ref: \"ruleForm\",\n        rules: $data.rules,\n        model: $data.market,\n        \"label-width\": \"80px\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_form_item, {\n          label: \"活动名称\",\n          prop: \"name\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_input, {\n            modelValue: $data.market.name,\n            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.market.name = $event),\n            type: \"text\",\n            maxlength: \"20\",\n            \"show-word-limit\": \"\"\n          }, null, 8 /* PROPS */, [\"modelValue\"])]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_form_item, {\n          label: \"活动类型\",\n          prop: \"type\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_select, {\n            modelValue: $data.market.type,\n            \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.market.type = $event),\n            modelModifiers: {\n              number: true\n            },\n            placeholder: \"请选择\",\n            clearable: \"\"\n          }, {\n            default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.typeOption, item => {\n              return _openBlock(), _createBlock(_component_el_option, {\n                key: item.value,\n                label: item.label,\n                value: item.value\n              }, null, 8 /* PROPS */, [\"label\", \"value\"]);\n            }), 128 /* KEYED_FRAGMENT */))]),\n\n            _: 1 /* STABLE */\n          }, 8 /* PROPS */, [\"modelValue\"])]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_form_item, {\n          label: \"活动图片\",\n          prop: \"bannerImage\"\n        }, {\n          default: _withCtx(() => [_withDirectives(_createVNode(_component_el_input, {\n            modelValue: $data.market.bannerImage,\n            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.market.bannerImage = $event)\n          }, null, 8 /* PROPS */, [\"modelValue\"]), [[_vShow, false]]), _createVNode(_component_el_upload, {\n            action: \"http://localhost:8000/web/upload\",\n            headers: {\n              'token': $data.token\n            },\n            limit: 1,\n            name: \"file\",\n            \"file-list\": $data.pictureList,\n            \"list-type\": \"picture-card\",\n            \"on-preview\": $options.handleImagePreview,\n            \"on-remove\": $options.handleImageRemove,\n            \"on-success\": $options.handleImageSuccess\n          }, {\n            default: _withCtx(() => [_hoisted_7]),\n            _: 1 /* STABLE */\n          }, 8 /* PROPS */, [\"headers\", \"file-list\", \"on-preview\", \"on-remove\", \"on-success\"])]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_form_item, {\n          label: \"开始时间\",\n          prop: \"beginTime\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_date_picker, {\n            modelValue: $data.market.beginTime,\n            \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.market.beginTime = $event),\n            \"value-format\": \"YYYY-MM-DD HH:mm:ss\",\n            type: \"datetime\",\n            placeholder: \"请选择开始时间\"\n          }, null, 8 /* PROPS */, [\"modelValue\"])]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_form_item, {\n          label: \"结束时间\",\n          prop: \"overTime\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_date_picker, {\n            modelValue: $data.market.overTime,\n            \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $data.market.overTime = $event),\n            \"value-format\": \"YYYY-MM-DD HH:mm:ss\",\n            type: \"datetime\",\n            placeholder: \"请选择结束时间\"\n          }, null, 8 /* PROPS */, [\"modelValue\"])]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_form_item, {\n          label: \"关联商品\",\n          prop: \"goodsIds\"\n        }, {\n          default: _withCtx(() => [_withDirectives(_createVNode(_component_el_input, {\n            modelValue: $data.market.goodsIds,\n            \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $data.market.goodsIds = $event)\n          }, null, 8 /* PROPS */, [\"modelValue\"]), [[_vShow, false]]), _createVNode(_component_el_table, {\n            data: $data.selectedGoodsList,\n            style: {\n              \"width\": \"100%\"\n            },\n            \"empty-text\": \"您还没有添加活动商品哦\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_table_column, {\n              prop: \"name\",\n              label: \"主图\",\n              width: \"60\"\n            }, {\n              default: _withCtx(scope => [_createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_el_image, {\n                class: \"goods_image\",\n                src: scope.row.imageUrl\n              }, null, 8 /* PROPS */, [\"src\"])])]),\n              _: 1 /* STABLE */\n            }), _createVNode(_component_el_table_column, {\n              prop: \"title\",\n              label: \"标题\"\n            }, {\n              default: _withCtx(scope => [_createElementVNode(\"div\", _hoisted_9, _toDisplayString(scope.row.title), 1 /* TEXT */)]),\n\n              _: 1 /* STABLE */\n            }), _createVNode(_component_el_table_column, {\n              prop: \"price\",\n              label: \"价格\",\n              width: \"80\"\n            }, {\n              default: _withCtx(scope => [_createTextVNode(\"¥ \" + _toDisplayString(scope.row.price), 1 /* TEXT */)]),\n\n              _: 1 /* STABLE */\n            }), _createVNode(_component_el_table_column, {\n              align: \"right\"\n            }, {\n              header: _withCtx(() => [_createVNode(_component_el_popover, {\n                placement: \"left\",\n                width: 350,\n                trigger: \"click\",\n                visible: $data.goodsPopoverVisible\n              }, {\n                reference: _withCtx(() => [_createVNode(_component_el_button, {\n                  size: \"small\",\n                  type: \"primary\",\n                  icon: $setup.Plus,\n                  onClick: $options.addGoods\n                }, null, 8 /* PROPS */, [\"icon\", \"onClick\"])]),\n                default: _withCtx(() => [_createVNode(_component_el_table, {\n                  data: $data.goodsList,\n                  height: \"30vh\",\n                  style: {\n                    \"width\": \"100%\"\n                  },\n                  onSelect: $options.selectedGoodsIds\n                }, {\n                  default: _withCtx(() => [_createVNode(_component_el_table_column, {\n                    type: \"selection\",\n                    width: \"45\"\n                  }), _createVNode(_component_el_table_column, {\n                    prop: \"name\",\n                    label: \"主图\",\n                    width: \"60\"\n                  }, {\n                    default: _withCtx(scope => [_createElementVNode(\"div\", _hoisted_10, [_createVNode(_component_el_image, {\n                      class: \"goods_image\",\n                      src: scope.row.imageUrl\n                    }, null, 8 /* PROPS */, [\"src\"])])]),\n                    _: 1 /* STABLE */\n                  }), _createVNode(_component_el_table_column, {\n                    prop: \"title\",\n                    label: \"标题\"\n                  }, {\n                    default: _withCtx(scope => [_createElementVNode(\"div\", _hoisted_11, _toDisplayString(scope.row.title), 1 /* TEXT */)]),\n\n                    _: 1 /* STABLE */\n                  }), _createVNode(_component_el_table_column, {\n                    prop: \"price\",\n                    label: \"价格\",\n                    width: \"80\"\n                  }, {\n                    default: _withCtx(scope => [_createTextVNode(\"¥ \" + _toDisplayString(scope.row.price), 1 /* TEXT */)]),\n\n                    _: 1 /* STABLE */\n                  })]),\n\n                  _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"data\", \"onSelect\"]), _createElementVNode(\"div\", _hoisted_12, [_createVNode(_component_el_button, {\n                  size: \"small\",\n                  onClick: _cache[9] || (_cache[9] = $event => $data.goodsPopoverVisible = false)\n                }, {\n                  default: _withCtx(() => [_createTextVNode(\"取消\")]),\n                  _: 1 /* STABLE */\n                }), _createVNode(_component_el_button, {\n                  size: \"small\",\n                  type: \"primary\",\n                  onClick: $options.confirmSelectedGoods\n                }, {\n                  default: _withCtx(() => [_createTextVNode(\"确定\")]),\n                  _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"onClick\"])])]),\n                _: 1 /* STABLE */\n              }, 8 /* PROPS */, [\"visible\"])]),\n              default: _withCtx(scope => [_createVNode(_component_el_button, {\n                size: \"small\",\n                type: \"danger\",\n                icon: $setup.Minus,\n                onClick: $event => $options.removeSelectedGoods(scope.row)\n              }, null, 8 /* PROPS */, [\"icon\", \"onClick\"])]),\n              _: 1 /* STABLE */\n            })]),\n\n            _: 1 /* STABLE */\n          }, 8 /* PROPS */, [\"data\"])]),\n          _: 1 /* STABLE */\n        })]),\n\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"rules\", \"model\"])]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"title\", \"modelValue\", \"onClose\"])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"mappings":"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","names":["style","_createElementVNode","class","_createBlock","_component_container","_createCommentVNode","_createVNode","_component_el_form","inline","model","$data","ref","_component_el_form_item","prop","_component_el_input","id","number","placeholder","_component_el_select","type","_component_el_option","label","value","status","_component_el_button","icon","$setup","onClick","$options","_component_el_table","data","height","empty","_hoisted_5","_component_el_empty","description","_component_el_table_column","default","scope","_component_el_image","src","row","bannerImage","_component_el_tag","_hoisted_1","_component_el_icon","_component_timer","_hoisted_2","beginTime","_hoisted_3","_hoisted_4","overTime","_component_el_switch","size","_component_el_popconfirm","title","confirmButtonText","cancelButtonText","cancelButtonType","onConfirm","reference","_hoisted_6","_component_el_pagination","layout","total","onCurrentChange","onPrevClick","onNextClick","background","_component_el_dialog","top","width","onClose","footer","_hoisted_13","rules","name","maxlength","clearable","_createElementBlock","_Fragment","item","key","_component_el_upload","action","headers","limit","_hoisted_7","_component_el_date_picker","goodsIds","_hoisted_8","imageUrl","_hoisted_9","price","align","header","_component_el_popover","placement","trigger","visible","onSelect","_hoisted_10","_hoisted_11","_hoisted_12"],"sourceRoot":"","sources":["/Users/work/server/imall/web/src/view/Market.vue"],"sourcesContent":["<template>\n  <container>\n    <!-- 活动查询 -->\n    <el-form :inline=\"true\" :model=\"query\" ref=\"query\" class=\"goods_query_form\">\n      <el-form-item prop=\"id\">\n        <el-input v-model.number=\"query.id\" placeholder=\"活动ID\"/>\n      </el-form-item>\n      <el-form-item prop=\"status\">\n        <el-select v-model=\"query.type\" placeholder=\"活动类型\">\n          <el-option label=\"钻石展位\" value=\"1\"></el-option>\n          <el-option label=\"限时特惠\" value=\"2\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item prop=\"status\">\n        <el-select v-model=\"query.status\" placeholder=\"活动状态\">\n          <el-option label=\"进行中\" value=\"1\"></el-option>\n          <el-option label=\"已结束\" value=\"2\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" :icon=\"Search\" @click=\"getMarketList\">查询</el-button>\n        <el-button type=\"primary\" :icon=\"Brush\" @click=\"resetForm\"/>\n        <el-button type=\"primary\" :icon=\"Plus\" @click=\"add\">活动</el-button>\n      </el-form-item>\n    </el-form>\n    <!-- 活动列表 -->\n    <el-table :data=\"marketList\" height=\"65vh\" style=\"width: 100%\">\n     <el-table-column prop=\"bannerImage\" label=\"活动图片\" min-width=\"50\">\n        <template #default=\"scope\">\n          <el-image :src=\"scope.row.bannerImage\" style=\"border-radius: 5px;\"/>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"name\" label=\"活动名称\"/>\n      <el-table-column prop=\"type\" label=\"活动类型\" min-width=\"50\">\n        <template #default=\"scope\">\n          <el-tag v-if=\"scope.row.type === 1\" type=\"primary\">新品推荐</el-tag>\n          <el-tag v-if=\"scope.row.type === 2\" type=\"primary\">限时特惠</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"beginTime\" label=\"开始时间\" min-width=\"100\">\n        <template #default=\"scope\">\n          <div style=\"display: flex; align-items: center\">\n            <el-icon>\n              <timer/>\n            </el-icon>\n            <span style=\"margin-left: 10px\">{{ scope.row.beginTime }}</span>\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"overTime\" label=\"结束时间\" min-width=\"100\">\n        <template #default=\"scope\">\n          <div style=\"display: flex; align-items: center\">\n            <el-icon>\n              <timer/>\n            </el-icon>\n            <span style=\"margin-left: 10px\">{{ scope.row.overTime }}</span>\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"status\" label=\"状态\" min-width=\"50\">\n        <template #default=\"scope\">\n          <el-switch v-model=\"scope.row.status\" :active-value=\"1\" :inactive-value=\"2\" @click=\"changeStatus(scope.row)\"/>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\">\n        <template #default=\"scope\">\n          <el-button size=\"small\" @click=\"edit(scope.row)\">编辑</el-button>\n          <el-popconfirm title=\"此操作将永久删除该信息, 是否继续?\"\n                         confirmButtonText=\"确认\"\n                         cancelButtonText=\"取消\"\n                         cancelButtonType=\"default\"\n                         :icon=\"WarningFilled\"\n                         @confirm=\"deleteMarket(scope.row)\">\n            <template #reference>\n             <el-button size=\"small\" type=\"danger\">删除</el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n      <template #empty>\n        <div style=\"margin: 50px 0;\">\n          <el-empty v-if=\"showEmpty\" description=\"暂时还没有活动哦\" />\n        </div>\n      </template>\n    </el-table>\n    <div style=\"padding: 10px 0;\">\n      <el-pagination layout=\"total, prev, pager, next\"\n                   :current-page=\"pageNum\"\n                   :page-size=\"pageSize\"\n                   :total=\"total\"\n                   @current-change=\"handleCurrentChange\"\n                   @prev-click=\"handleCurrentChangePrev\"\n                   @next-click=\"handleCurrentChangeNext\" background/>\n    </div>\n    <!-- 添加、编辑营销，通用对话框 -->\n    <el-dialog :title=\"dialogTitle\" v-model=\"marketDialogVisible\" :lock-scroll=\"false\" top=\"5vh\" width=\"45%\"\n               @close=\"cancel\">\n      <el-form ref=\"ruleForm\" :rules=\"rules\" :model=\"market\" label-width=\"80px\">\n        <el-form-item label=\"活动名称\" prop=\"name\">\n          <el-input v-model=\"market.name\" type=\"text\" maxlength=\"20\" show-word-limit/>\n        </el-form-item>\n        <el-form-item label=\"活动类型\" prop=\"type\">\n          <el-select v-model.number=\"market.type\" placeholder=\"请选择\" clearable>\n            <el-option v-for=\"item in typeOption\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"/>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"活动图片\" prop=\"bannerImage\">\n          <el-input v-show=\"false\" v-model=\"market.bannerImage\"/>\n          <el-upload\n              action=\"http://localhost:8000/web/upload\"\n              :headers=\"{'token': token}\"\n              :limit=\"1\"\n              name=\"file\"\n              :file-list=\"pictureList\"\n              list-type=\"picture-card\"\n              :on-preview=\"handleImagePreview\"\n              :on-remove=\"handleImageRemove\"\n              :on-success=\"handleImageSuccess\">\n            <div class=\"goods_image_upload_icon\">+</div>\n          </el-upload>\n        </el-form-item>\n        <el-form-item label=\"开始时间\" prop=\"beginTime\">\n          <el-date-picker v-model=\"market.beginTime\" value-format=\"YYYY-MM-DD HH:mm:ss\" type=\"datetime\" placeholder=\"请选择开始时间\"/>\n        </el-form-item>\n        <el-form-item label=\"结束时间\" prop=\"overTime\">\n          <el-date-picker v-model=\"market.overTime\" value-format=\"YYYY-MM-DD HH:mm:ss\" type=\"datetime\" placeholder=\"请选择结束时间\"/>\n        </el-form-item>\n        <el-form-item label=\"关联商品\" prop=\"goodsIds\">\n          <el-input v-show=\"false\" v-model=\"market.goodsIds\"/>\n          <el-table :data=\"selectedGoodsList\" style=\"width: 100%;\" empty-text=\"您还没有添加活动商品哦\">\n            <el-table-column prop=\"name\" label=\"主图\" width=\"60\">\n              <template #default=\"scope\">\n                <div style=\"display: flex;justify-content: center;align-items: center;\">\n                  <el-image class=\"goods_image\" :src=\"scope.row.imageUrl\"/>\n                </div>\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"title\" label=\"标题\">\n              <template #default=\"scope\">\n                <div style=\"font-size: 10px;line-height: 15px;\">{{ scope.row.title }}</div>\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"price\" label=\"价格\" width=\"80\">\n              <template #default=\"scope\">¥ {{ scope.row.price }}</template>\n            </el-table-column>\n            <el-table-column align=\"right\">\n              <template #header>\n                <el-popover placement=\"left\" :width=\"350\" trigger=\"click\" :visible=\"goodsPopoverVisible\">\n                  <template #reference>\n                    <el-button size=\"small\" type=\"primary\" :icon=\"Plus\" @click=\"addGoods\"/>\n                  </template>\n                  <el-table :data=\"goodsList\" height=\"30vh\" style=\"width: 100%\" @select=\"selectedGoodsIds\">\n                    <el-table-column type=\"selection\" width=\"45\"/>\n                    <el-table-column prop=\"name\" label=\"主图\" width=\"60\">\n                      <template #default=\"scope\">\n                        <div style=\"display: flex;justify-content: center;align-items: center;\">\n                          <el-image class=\"goods_image\" :src=\"scope.row.imageUrl\"/>\n                        </div>\n                      </template>\n                    </el-table-column>\n                    <el-table-column prop=\"title\" label=\"标题\">\n                      <template #default=\"scope\">\n                        <div style=\"font-size: 10px;line-height: 15px;\">{{ scope.row.title }}</div>\n                      </template>\n                    </el-table-column>\n                    <el-table-column prop=\"price\" label=\"价格\" width=\"80\">\n                      <template #default=\"scope\">¥ {{ scope.row.price }}</template>\n                    </el-table-column>\n                  </el-table>\n                  <div style=\"text-align: right; margin: 0;padding-top: 10px;\">\n                    <el-button size=\"small\" @click=\"goodsPopoverVisible = false\">取消</el-button>\n                    <el-button size=\"small\" type=\"primary\" @click=\"confirmSelectedGoods\">确定</el-button>\n                  </div>\n                </el-popover>\n              </template>\n              <template #default=\"scope\">\n                <el-button size=\"small\" type=\"danger\" :icon=\"Minus\" @click=\"removeSelectedGoods(scope.row)\" />\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"cancel\">取消</el-button>\n          <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\n          <el-button type=\"primary\" @click=\"confirmMarket\">确定</el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </container>\n</template>\n\n<script>\nimport container from \"@/components/container\";\nimport {Brush, Minus, Plus, Search, Timer, WarningFilled} from \"@element-plus/icons-vue\";\nimport {ElMessage} from \"element-plus\";\n\nexport default {\n  name: \"Market\",\n  components: {container, Timer},\n  setup() {\n    return {Search, Brush, Plus, Minus, WarningFilled}\n  },\n  data() {\n    return {\n      query: {\n        id: '',\n        type: '',\n        status: ''\n      },\n      marketList: [],\n      goodsList: [],\n      market: {\n        id: '',\n        bannerImage: '',\n        name: '',\n        type: '',\n        beginTime: '',\n        overTime: '',\n        goodsIds: '',\n        status: ''\n      },\n      typeOption: [{\n        value: 1,\n        label: '钻石展位'\n      }, {\n        value: 2,\n        label: '限时特惠'\n      }],\n\n      rules: {\n        name: { required: true, message: '请输入一个名称', trigger: 'blur' },\n        bannerImage: { required: true, message: '至少上传一张图片', trigger: 'blur' },\n        type: { required: true, message: '请选择活动类型', trigger: 'blur' },\n        beginTime: { required: true, message: '请设置开始时间', trigger: 'blur' },\n        overTime: { required: true, message: '请设置结束时间', trigger: 'blur' },\n        goodsIds: { required: true, message: '至少关联一个商品', trigger: 'blur' }\n      },\n\n\n      // 图片列表\n      pictureList: [],\n\n      goodsIds: [],\n      selectedGoodsList: [],\n\n      marketId: '',\n\n      // 分页\n      total: 0,\n      pageNum: 1,\n      pageSize: 10,\n\n      // 操作状态\n      dialogTitle: '',\n      operateType: '',\n      marketDialogVisible: false,\n      goodsPopoverVisible: false,\n\n      // 请求认证\n      token: '',\n\n      // 空状态\n      showEmpty: false\n    }\n  },\n  mounted() {\n    this.getMarketList()\n    this.token = localStorage.getItem('token')\n  },\n  methods: {\n    // 分页，处理函数\n    handleCurrentChangePrev(val) {\n      this.pageNum = val;\n      console.log(`上一页: ${val}`);\n    },\n    handleCurrentChange(val) {\n      this.pageNum = val;\n      this.getMarketList()\n      console.log(`当前页: ${val}`);\n    },\n    handleCurrentChangeNext(val) {\n      this.pageNum = val;\n      console.log(`下一页: ${val}`);\n    },\n\n    // 图片上传，处理函数\n    handleImagePreview(file) {\n      this.market.bannerImage = file.url\n    },\n    handleImageRemove(file, fileList) {\n      this.market.bannerImage = ''\n      console.log(file, fileList)\n    },\n    handleImageSuccess(response) {\n      this.market.bannerImage = response.data\n    },\n\n    // 添加活动\n    add() {\n      this.dialogTitle = '添加活动'\n      this.operateType = 'add'\n      this.selectedGoodsList = []\n      this.marketDialogVisible = true\n    },\n\n    // 编辑活动\n    edit(row) {\n      this.dialogTitle = '编辑活动'\n      this.operateType = 'edit'\n      this.market.id = row.id\n      this.market.name = row.name\n      this.market.type = row.type\n      this.market.bannerImage = row.bannerImage\n      this.pictureList.push({url: row.bannerImage})\n      this.market.beginTime = row.beginTime\n      this.market.overTime = row.overTime\n      this.market.goodsIds = row.goodsIds\n      this.market.status = row.status\n      this.goodsIds = row.goodsIds.split(',')\n      this.getSelectedGoodsList(row.goodsIds)\n      this.marketDialogVisible = true\n    },\n\n    // 获取营销活动列表\n    getMarketList() {\n      this.$axios.get('/market/list', {\n        params: {\n          id: this.query.id,\n          type: this.query.type,\n          status: this.query.status,\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          sid: parseInt(localStorage.getItem('sid'))\n        }\n      }).then((response) => {\n        this.total = response.data.data.total;\n        this.marketList = response.data.data.list;\n        if (this.marketList.length === 0) {\n          this.showEmpty = true\n        }\n      }).catch((error) => {\n        console.log(error)\n      })\n    },\n\n    // 开启、关闭活动\n    changeStatus(row){\n      console.log(row.status)\n      this.$axios.put('/market/status/update', {\n        id: row.id,\n        status: parseInt(row.status),\n      }).then((response) => {\n        if (response.data.code === 200 && row.status === 1){\n          ElMessage({message: '活动已开启', type: 'success'})\n        }\n        if (response.data.code === 200 && row.status === 2){\n          ElMessage({message: '活动已关闭', type: 'success'})\n        }\n      }).catch((error) => {\n        console.log(error)\n      })\n    },\n\n    // 添加关联商品\n    addGoods() {\n      this.getGoodsList()\n      this.goodsPopoverVisible = true\n    },\n\n    // 选中时，获取商品ID\n    selectedGoodsIds(selection, row) {\n      this.goodsIds.push(row.id)\n    },\n\n    // 确认选中的商品\n    confirmSelectedGoods() {\n      this.selectedGoodsList = []\n      this.market.goodsIds = this.goodsIds.toString()\n      this.goodsList.filter(item => {\n        this.goodsIds.some(id => { if (id === item.id){ this.selectedGoodsList.push(item) } })\n      })\n      this.goodsPopoverVisible = false\n    },\n\n    // 移除选中的商品\n    removeSelectedGoods(row){\n      this.selectedGoodsList.splice(this.selectedGoodsList.indexOf(row.id), 1)\n      this.goodsIds.splice(this.goodsIds.indexOf(row.id), 1)\n      this.market.goodsIds = this.goodsIds.toString()\n      console.log(this.goodsIds)\n    },\n\n    // 获取已上架商品列表\n    getGoodsList() {\n      this.$axios.get('/market/goods/list', {\n        params: { goodsIds: \"\" }\n      }).then((response) => {\n        this.goodsList = response.data.data;\n      }).catch((error) => {\n        console.log(error)\n      })\n    },\n\n    // 获取已关联的商品列表\n    getSelectedGoodsList(goodsIds) {\n      this.$axios.get('/market/goods/list', {\n        params: { goodsIds: goodsIds }\n      }).then((response) => {\n        this.selectedGoodsList = response.data.data;\n      }).catch((error) => {\n        console.log(error)\n      })\n    },\n\n    // 确认添加或编辑活动\n    confirmMarket() {\n      this.$refs['ruleForm'].validate((valid) => {\n        if (valid) {\n          if (this.operateType === 'add') {\n            // 添加活动\n            this.$axios.post('/market/create', {\n              name: this.market.name,\n              type: this.market.type,\n              bannerImage: this.market.bannerImage,\n              beginTime: this.market.beginTime,\n              overTime: this.market.overTime,\n              goodsIds: this.market.goodsIds,\n              sid: parseInt(localStorage.getItem('sid'))\n            }).then((response) => {\n              if (response.data.code === 200) {\n                ElMessage({message: response.data.message, type: 'success'})\n              }\n              this.getMarketList()\n            }).catch((error) => {\n              console.log(error)\n            })\n          }\n          if (this.operateType === 'edit') {\n            // 编辑活动\n            this.$axios.put('/market/update', {\n              id: this.market.id,\n              name: this.market.name,\n              type: this.market.type,\n              bannerImage: this.market.bannerImage,\n              beginTime: this.market.beginTime,\n              overTime: this.market.overTime,\n              goodsIds: this.market.goodsIds,\n              status: this.market.status\n            }).then((response) => {\n              if (response.data.code === 200) {\n                ElMessage({message: response.data.message, type: 'success'})\n              }\n              this.getMarketList()\n            }).catch((error) => {\n              console.log(error)\n            })\n          }\n          this.marketDialogVisible = false\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n\n    // 删除活动\n    deleteMarket(row) {\n      this.$axios.delete('/market/delete', {\n          params: {\n            id: row.id\n          }\n        }).then((response) => {\n          if (response.data.code === 200) {\n            ElMessage({message: response.data.message, type: 'success'})\n          }\n          this.getMarketList()\n        }).catch((error) => {\n          console.log(error)\n      })\n    },\n\n    // 取消\n    cancel() {\n      this.$refs['ruleForm'].resetFields()\n      this.empty()\n      this.marketDialogVisible = false\n    },\n\n    // 重置表单\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n      switch (formName) {\n        case 'query': this.getMarketList(); break;\n        case 'ruleForm': this.empty(); break;\n        default: console.log('invalid resetForm');\n      }\n    },\n\n    // 清空数据\n    empty() {\n      this.market.bannerImage = '',\n      this.market.name = '',\n      this.market.type = '',\n      this.market.beginTime = '',\n      this.market.overTime = '',\n      this.market.goodsIds = '',\n      this.goodsIds = ''\n      this.selectedGoodsList = []\n      this.pictureList = []\n    },\n  }\n}\n</script>\n\n<style scoped>\n.goods_image {\n  width: 35px;\n  height: 35px;\n  border-radius: 5px;\n}\n.el-dialog {\n  border-radius: 10px !important;\n}\n\n.el-upload{\n  width: 100px;\n  height: 100px;\n  line-height: 100px;\n  font-size: 16px;\n}\n\n.el-upload--picture-card {\n  background-color: #F2F4F7;\n  border: none;\n}\n\n.el-upload--picture-card{\n  width: 100px;\n  height: 100px;\n  margin-top: 0;\n  font-size: 16px !important;\n}\n\n.el-upload-list--picture-card .el-upload-list__item{\n  width: 100px;\n  height: 100px;\n  line-height: 100px;\n  font-size: 16px;\n}\n\n.el-upload-list--picture-card .el-upload-list__item-thumbnail{\n  width: 100px;\n  height: 100px;\n  line-height: 100px;\n  font-size: 16px;\n}\n\n.el-table__header tr, .el-table__header th {\n  background-color: #eff6ff !important;\n  font-weight: 450 !important;\n  color: #627a94 !important;\n  border-bottom: none !important;\n}\n</style>"]},"metadata":{},"sourceType":"module"}